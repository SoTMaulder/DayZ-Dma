name: Build & Release DayZ-Dma on: push: tags: - "v*" workflow_dispatch: jobs: build_windows: runs-on: windows-latest steps: - uses: actions/checkout@v4 - name: Setup MSBuild uses: microsoft/setup-msbuild@v1 # ⭐ Download mapcontent.rar from your GitHub Release - name: Download MapContent run: | curl -L -o mapcontent.rar "https://github.com/SoTMaulder/DayZ-Dma/releases/download/MapRelease/mapcontent.rar" # ⭐ Extract mapcontent to dma-dayz-cpp/ - name: Extract MapContent run: | choco install -y 7zip 7z x mapcontent.rar -aoa -o"dma-dayz-cpp" # ⭐ Build the Visual Studio solution (Release, x64) - name: Build Solution run: msbuild dma-dayz-cpp.sln /p:Configuration=Release # ⭐ Package .exe + mapcontent into a ZIP - name: Package Build shell: powershell run: | mkdir release # Copy actual built EXE (your correct build path) Copy-Item -Path ".\x64\Release\*.exe" -Destination ".\release" -Force # Include mapcontent folder Copy-Item -Path ".\dma-dayz-cpp\mapcontent" -Destination ".\release\mapcontent" -Recurse -Force # Create final zip Compress-Archive -Path release\* -DestinationPath DayZ-DMA.zip # ⭐ Upload ZIP to GitHub Release - name: Create GitHub Release uses: softprops/action-gh-release@v2 with: files: DayZ-DMA.zip env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
